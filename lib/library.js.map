{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 21981138d4918f561778","webpack:///./src/index.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;KCtCqB,O;AACjB,wBAAc;AAAA;;AACV,cAAK,KAAL,GAAa,SAAb;AACH;;;;+BAIK,I,EAAM;AACR,iBAAI,IAAJ;iBACI,GADJ;iBAEI,EAFJ;iBAGI,YAAY,CAHhB;iBAII,aAAa,MAJjB;iBAKI,WALJ;;AAOA,iBAAI,SAAS,IAAI,UAAJ,EAAb;;AAEA,kBAAK,SAAS,cAAT,CAAwB,KAAK,EAA7B,CAAL;;AAEA,iBAAI,GAAG,KAAH,CAAS,MAAT,IAAmB,CAAvB,EAA0B;AACtB,uBAAM,QAAN;AACH;;AAED,oBAAO,GAAG,KAAH,CAAS,CAAT,CAAP;AACA,mBAAM,KAAK,GAAX;AACA,2BAAc,KAAK,IAAL,CAAU,KAAK,IAAL,GAAY,UAAtB,CAAd;;AAEA,oBAAO,SAAP,GAAmB,YAAY;AAC3B,qBAAI,GAAJ;qBACI,WAAW,IAAI,QAAJ,EADf;;AAGA,qBAAI,QAAQ,YAAY,UAAxB;qBACI,MAAM,KAAK,GAAL,CAAS,QAAQ,UAAjB,EAA6B,KAAK,IAAlC,CADV;;AAGA,0BAAS,MAAT,CAAgB,MAAhB,EAAwB,KAAK,KAAL,CAAW,KAAX,EAAkB,GAAlB,CAAxB;AACA,0BAAS,MAAT,CAAgB,MAAhB,EAAwB,KAAK,IAA7B;AACA,0BAAS,MAAT,CAAgB,MAAhB,EAAwB,KAAK,IAA7B;AACA,0BAAS,MAAT,CAAgB,MAAhB,EAAwB,KAAK,IAA7B;AACA,0BAAS,MAAT,CAAgB,YAAhB,EAA8B,WAA9B;AACA,0BAAS,MAAT,CAAgB,YAAhB,EAA8B,SAA9B;AACA,0BAAS,MAAT,CAAgB,UAAhB,EAA4B,KAAK,IAAL,CAAU,SAAV,CAAoB,CAApB,EAAuB,KAAK,IAAL,CAAU,WAAV,CAAsB,GAAtB,CAAvB,CAA5B;;AAEA,qBAAI,OAAO,KAAX,EAAkB;AACd,6BAAQ,GAAR,CAAY,OAAO,KAAnB;AACH,kBAFD,MAEO;AACH,2BAAM,IAAI,cAAJ,EAAN;AACA,yBAAI,IAAJ,CAAS,MAAT,EAAiB,GAAjB,EAAsB,IAAtB;AACA,yBAAI,gBAAJ,CAAqB,0BAArB;AACA,yBAAI,IAAJ,CAAS,QAAT;AACA,yBAAI,kBAAJ,GAAyB,YAAY;AACjC,6BAAI,GAAJ;;AAEA,6BAAI,IAAI,UAAJ,KAAmB,CAAvB,EAA0B;AACtB,iCAAI,IAAI,MAAJ,KAAe,GAAnB,EAAwB;AACpB,uCAAM,IAAI,YAAV;AACA,yCAAQ,GAAR,CAAY,SAAZ,EAAuB,WAAvB;AACA,yCAAQ,GAAR,CAAY,GAAZ;AACA,qCAAI,GAAJ,EAAS;;AAER;AACJ;AACJ;AACJ,sBAbD;AAcH;AACD,qBAAI,YAAY,cAAc,CAA9B,EAAiC;AAC7B;AACA,4BAAO,SAAP;AACH;AACJ,cAzCD;;AA2CA,oBAAO,kBAAP,CAA0B,IAA1B;AACH;;;6BAnEU;AACP,oBAAO,KAAK,KAAZ;AACH;;;;;;mBANgB,O","file":"library.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"library\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"library\"] = factory();\n\telse\n\t\troot[\"library\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 21981138d4918f561778\n **/","export default class Library {\n    constructor() {\n        this._name = 'Library';\n    }\n    get name() {\n        return this._name;\n    }\n    start(data) {\n        var file,\n            uri,\n            el,\n            nCountNum = 0,\n            nSliceSize = 500000,\n            nTotalCount;\n\n        var reader = new FileReader();\n\n        el = document.getElementById(data.el);\n\n        if (el.files.length <= 0) {\n            alert('请选择文件!');\n        }\n\n        file = el.files[0];\n        uri = data.uri;\n        nTotalCount = Math.ceil(file.size / nSliceSize);\n\n        reader.onloadend = function () {\n            var xhr,\n                fileData = new FormData();\n\n            var start = nCountNum * nSliceSize,\n                end = Math.min(start + nSliceSize, file.size);\n\n            fileData.append('file', file.slice(start, end));\n            fileData.append('name', file.name);\n            fileData.append('size', file.size);\n            fileData.append('type', file.type);\n            fileData.append('totalCount', nTotalCount);\n            fileData.append('indexCount', nCountNum);\n            fileData.append('trueName', file.name.substring(0, file.name.lastIndexOf('.')));\n\n            if (reader.error) {\n                console.log(reader.error);\n            } else {\n                xhr = new XMLHttpRequest();\n                xhr.open('POST', uri, true);\n                xhr.overrideMimeType('application/octet-stream');\n                xhr.send(fileData);\n                xhr.onreadystatechange = function () {\n                    var rst;\n\n                    if (xhr.readyState === 4) {\n                        if (xhr.status === 200) {\n                            rst = xhr.responseText;\n                            console.log(nCountNum, nTotalCount);\n                            console.log(rst);\n                            if (rst) {\n                                // console.log(JSON.parse(data));\n                            }\n                        };\n                    };\n                };\n            }\n            if (nCountNum < nTotalCount - 1) {\n                nCountNum++ ;\n                reader.onloadend();\n            }\n        };\n\n        reader.readAsBinaryString(file);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/"],"sourceRoot":""}